!function(){function t(t,i,n){return t[0]=i[0]+n[0],t[1]=i[1]+n[1],t}function i(t,i){return t[0]=-i[0],t[1]=-i[1],t}function n(t,i){let n=i[0],e=i[1],o=n*n+e*e;return o>0&&(o=1/Math.sqrt(o)),t[0]=i[0]*o,t[1]=i[1]*o,t}function e(t,i){var n,e;(n=i.t)[0]=(e=t.i)[4],n[1]=e[5],i.o[0]=i.t[0]-i.s[0]/2,i.o[1]=i.t[1]-i.s[1]/2,i.h[0]=i.t[0]+i.s[0]/2,i.h[1]=i.t[1]+i.s[1]/2}function o(t,n){for(let h=0;h<n.length;h++){let r=n[h];if(r!==t&&(e=t).o[0]<(o=r).h[0]&&e.h[0]>o.o[0]&&e.o[1]<o.h[1]&&e.h[1]>o.o[1]){let n=s(t,r);t.l.push({u:r,m:n}),r.l.push({u:t,m:i([0,0],n)})}}var e,o}function s(t,i){let n=t.t[0]-i.t[0],e=t.s[0]/2+i.s[0]/2-Math.abs(n),o=t.t[1]-i.t[1],s=t.s[1]/2+i.s[1]/2-Math.abs(o);return e<s?[e*Math.sign(n),0]:[0,s*Math.sign(o)]}function h(t,i){let e=t[1][i],o=t[6][i];o.M[0]<0&&(o.M[0]=0,e._[0]=-e._[0]),o.M[0]>t.p&&(o.M[0]=t.p,e._[0]=-e._[0]),o.M[1]<0&&(o.M[1]=0,e._[1]=-e._[1]),o.M[1]>t.v&&(o.M[1]=t.v,e._[1]=-e._[1]);let s=t[0][i];if(s.l.length>0){let i=s.l[0];if(i.m[0]&&(o.M[0]+=i.m[0],e._[0]=-e._[0]),i.m[1]&&(o.M[1]+=i.m[1],e._[1]=-e._[1]),32&t.i[i.u.g]){let n=t[5][i.u.g];e._[0]+=n._[0],e._[1]+=n._[1]}}let h=t[5][i];h._[0]=e._[0],h._[1]=e._[1],n(h._,h._)}function r(t,i){t[0][i].l.length>0&&t.S(i)}function l(i,e){let o=i[5][e];o._[0]=0,o._[1]=0,i.T.C&&t(o._,o._,[-1,0]),i.T.U&&t(o._,o._,[1,0]),i.T.D&&t(o._,o._,[0,-1]),i.T.$&&t(o._,o._,[0,1]),n(o._,o._)}function f(t,i){let n=t[4][i];t.k.fillStyle=n.A,t.k.fillRect(-n.H/2,-n.F/2,n.H,n.F)}function u(t,i,n){let e=t[6][i],o=t[5][i];e.M[0]+=o._[0]*o.I*n,e.M[1]+=o._[1]*o.I*n,e.O=1}function c(t){return(i,n)=>{i.i[n]|=1,i[0][n]={g:n,s:t,o:[0,0],h:[0,0],t:[0,0],l:[]}}}function a(t,i,n){return(e,o)=>{e.i[o]|=16,e[4][o]={H:t,F:i,A:n}}}function m(t){return(i,n)=>{i.i[n]|=32,i[5][n]={_:[0,0],I:t}}}let d=document.getElementById("tick"),w=document.getElementById("fps"),M=new class{constructor(){this.i=[],this[0]=[],this[1]=[],this[2]=[],this[3]=[],this[4]=[],this[5]=[],this[6]=[],this.p=window.innerWidth,this.v=window.innerHeight,this.R=document.querySelector("main"),this.T={mouse_x:0,mouse_y:0},this.InputEvent={mouse_x:0,mouse_y:0,wheel_y:0},this.W=0,document.addEventListener("visibilitychange",()=>document.hidden?this.q():this.N()),window.addEventListener("keydown",t=>this.T[t.code]=1),window.addEventListener("keyup",t=>this.T[t.code]=0),this.R.addEventListener("contextmenu",t=>t.preventDefault()),this.R.addEventListener("mousedown",t=>{this.T[`mouse_${t.button}`]=1,this.InputEvent[`mouse_${t.button}_down`]=1}),this.R.addEventListener("mouseup",t=>{this.T[`mouse_${t.button}`]=0,this.InputEvent[`mouse_${t.button}_up`]=1}),this.R.addEventListener("mousemove",t=>{this.T.mouse_x=t.offsetX,this.T.mouse_y=t.offsetY,this.InputEvent.mouse_x=t.movementX,this.InputEvent.mouse_y=t.movementY}),this.R.addEventListener("wheel",t=>{this.InputEvent.wheel_y=t.deltaY});let t=document.querySelector("canvas");t.width=this.p,t.height=this.v,this.k=t.getContext("2d")}j(t=0){for(let i=0;i<1e4;i++)if(!this.i[i])return this.i[i]=t,i;throw Error("No more entities available.")}B(t){let i=performance.now();!function(t,i){for(let i=0;i<t.i.length;i++)40==(40&t.i[i])&&l(t,i)}(this),function(t,i){for(let i=0;i<t.i.length;i++)99==(99&t.i[i])&&h(t,i)}(this),function(t,i){for(let i=0;i<t.i.length;i++)5==(5&t.i[i])&&r(t,i)}(this),function(t,i){for(let n=0;n<t.i.length;n++)96==(96&t.i[n])&&u(t,n,i)}(this,t),function(t,i){for(let i=0;i<t.i.length;i++)64==(64&t.i[i])&&(e=void 0,o=void 0,(n=t[6][i]).O&&(n.O=0,function t(i){for(let n of i.G)n.O=1,t(n)}(n),o=n.M,(e=n.i)[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=o[0],e[5]=o[1],function(t,i,n){let e=i[0],o=i[1],s=i[2],h=i[3],r=i[4],l=i[5],f=Math.sin(n),u=Math.cos(n);t[0]=e*u+s*f,t[1]=o*u+h*f,t[2]=e*-f+s*u,t[3]=o*-f+h*u,t[4]=r,t[5]=l}(n.i,n.i,n.J),function(t,i,n){let e=i[1],o=i[2],s=i[3],h=i[4],r=i[5],l=n[0],f=n[1];t[0]=i[0]*l,t[1]=e*l,t[2]=o*f,t[3]=s*f,t[4]=h,t[5]=r}(n.i,n.i,n.K),n.L&&function(t,i,n){let e=i[0],o=i[1],s=i[2],h=i[3],r=i[4],l=i[5],f=n[0],u=n[1],c=n[2],a=n[3],m=n[4],d=n[5];t[0]=e*f+s*u,t[1]=o*f+h*u,t[2]=e*c+s*a,t[3]=o*c+h*a,t[4]=e*m+s*d+r,t[5]=o*m+h*d+l}(n.i,n.L.i,n.i),function(t,i){let n=i[0],e=i[1],o=i[2],s=i[3],h=i[4],r=i[5],l=n*s-e*o;l&&(t[0]=s*(l=1/l),t[1]=-e*l,t[2]=-o*l,t[3]=n*l,t[4]=(o*r-s*h)*l,t[5]=(e*h-n*r)*l)}(n.P,n.i)));var n,e,o}(this),function(t,i){let n=[];for(let i=0;i<t.i.length;i++)if(65==(65&t.i[i])){let o=t[6][i],s=t[0][i];s.l=[],e(o,s),n.push(s)}for(let t=0;t<n.length;t++)o(n[t],n)}(this),function(t,i){t.k.resetTransform(),t.k.clearRect(0,0,t.p,t.v);for(let i=0;i<t.i.length;i++)if(80==(80&t.i[i])){let n=t[6][i];t.k.setTransform(n.i[0],n.i[1],n.i[2],n.i[3],n.i[4],n.i[5]),f(t,i)}}(this),function(t,i){d&&(d.textContent=(1e3*i).toFixed(1)),w&&(w.textContent=(1/i).toFixed())}(0,t),function(t,i,n){n&&(n.textContent=i.toFixed(1))}(0,performance.now()-i,document.querySelector("#frame"))}N(){let t=performance.now(),i=n=>{this.B((n-t)/1e3);for(let t in this.InputEvent)this.InputEvent[t]=0;t=n,this.W=requestAnimationFrame(i)};this.q(),i(t)}q(){cancelAnimationFrame(this.W)}V({M:t,J:i,K:n,X:e=[],G:o=[]}){let s=this.j();!function(t=[0,0],i=0,n=[1,1]){return(e,o)=>{e.i[o]|=64,e[6][o]={g:o,i:[1,0,0,1,0,0],P:[1,0,0,1,0,0],M:t,J:i,K:n,G:[],O:1}}}(t,i,n)(this,s);for(let t of e)t(this,s);let h=this[6][s];for(let t of o){let i=this.V(t),n=this[6][i];n.L=h,h.G.push(n)}return s}S(t){if(64&this.i[t])for(let i of this[6][t].G)this.S(i.g);this.i[t]=0}};!function(t){var i;t.i=[],t.V({M:[t.p/2,t.v-20],X:[(t,i)=>{t.i[i]|=8,t[3][i]={}},m(500),c([100,20]),a(100,20,"red")]}),t.V({M:[t.p/2,t.v-50],X:[(i=Math.random()*Math.PI*-1,(t,n)=>{t.i[n]|=2,t[1][n]={_:[Math.cos(i),Math.sin(i)]}}),m(300),c([20,20]),a(20,20,"orange")]});let n=(t.p-500-40)/2;for(let i=0;i<5;i++){let e=60+30*i;for(let i=0;i<5;i++)t.V({M:[n+110*i+50,e],X:[(t,i)=>{t.i[i]|=4,t[2][i]={}},c([100,20]),a(100,20,"green")]})}}(M),M.N(),window.game=M}();
